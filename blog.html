<!DOCTYPE html>
<html lang="en">
<head>
  <title>BLOG</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="/site-resources/favicon.png" type="image/x-icon">
  <link rel="icon" href="/site-resources/favicon.png" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="keywords" content="Adam Lehodey, Lehodey, Adam Louis Sebastian Lehodey, Adventures, Ideas, Global Denizen"> 
  <meta name="description" content="Adam Lehodey: Blog. Explore my work and opinion pieces from across the internet, all in one convenient place.">
  <meta name="author" content="Adam Louis Sebastian Lehodey">

  <!-- Resource hints for faster loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
  
  <!-- Preload critical resources -->
  <link rel="preload" href="site-resources/topography.png" as="image">
  <link rel="preload" href="site-resources/cover-photos/posters-stickers.jpg" as="image">
  <link rel="preload" href="site-resources/LinkedIn.png" as="image">
  <link rel="preload" href="Styling.css" as="style">
  <link rel="preload" href="blogstyling.css" as="style">
  <link rel="preload" href="blog-posts.xml" as="fetch" crossorigin>
  
  <!-- Critical CSS inlined for above-the-fold content -->
  <style>
    /* Critical CSS for immediate rendering */
    html, body { margin: 0; padding: 0; }
    .page-fade { opacity: 0; transition: opacity 0.5s ease-in-out; }
    .page-fade.fade-in { opacity: 1; }
    .hero-background { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; object-fit: cover; z-index: -2; }
    .homepage-nav { display: inline-block; vertical-align: top; line-height: 1; margin-top: 5vh; margin-left: 5vw; font-family: "Bodoni Moda", serif; font-size: 1.4vw; font-weight: 300; color: black; z-index: 2; }
    .social-container { position: relative; margin-right: 5vw; margin-bottom: 0px; z-index: 2; }
    .blog-background-image { position: absolute; top: 0; left: 0; width: 100vw; height: 52vh; background-image: url('../site-resources/cover-photos/posters-stickers.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; z-index: -1; }
    .blog-gradient-overlay { position: absolute; top: 0; left: 0; width: 100vw; height: 52vh; background: linear-gradient(to bottom, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0)); z-index: 0; pointer-events: none; }
    #blog-container { margin-top: 15vh; padding-top: 2rem; position: relative; z-index: 1; }
    @media (max-width: 768px) {
      .homepage-nav { font-size: 16px; text-align: center; width: 90vw; margin-left: 5vw; }
      .social-icon { width: 4vw; }
      .blog-background-image { height: 40vh; }
      .blog-gradient-overlay { height: 40vh; }
      #blog-container { margin-top: 10vh; }
    }
  </style>

  <link rel="stylesheet" type="text/css" href="Styling.css">
  <link rel="stylesheet" type="text/css" href="blogstyling.css">
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Bentham&family=Bodoni+Moda:ital,opsz,wght@0,6..96,400..900;1,6..96,400..900&family=Droid+Serif&family=Josefin+Sans&family=Lora&family=Libre+Bodoni:ital,wght@0,400..700;1,400..700&family=Noto+Serif+Display:ital,wght@0,100..900;1,100..900&family=Quicksand&family=Raleway&display=swap" rel="stylesheet">
</head>

<body class="page-fade subpage blog-page">
  <img class="hero-background" src="site-resources/topography.png" alt="Topography Background" loading="eager">
  <div class="blog-background-image"></div>
  <div class="blog-gradient-overlay"></div>
  <div class="social-container"><a href="https://www.linkedin.com/in/adamlehodey/" target="blank"><img class="social-icon" src="site-resources/LinkedIn.png" alt="LinkedIn Link" loading="eager"></a></div>
  <div class="homepage-nav"><a class="homepage-nav-link" href="/">HOME</a><span class="nav-separator"> • </span><a class="homepage-nav-link" href="blog">ESSAYS AND ARTICLES</a><span class="nav-separator"> • </span><a class="homepage-nav-link" href="biography">BIOGRAPHY</a><span class="nav-separator"> • </span><a class="homepage-nav-link" href="tutoring">INSTRUCTION</a><span class="nav-separator"> • </span><a class="homepage-nav-link" href="contact">CONTACT</a></div>
  <div class="block_1"></div> <hr class="content-divider" />

  <!-- Blog Filter Bar -->
  <div class="blog-filter-bar">
    <button class="filter-btn active" data-filter="all">All</button>
    <button class="filter-btn" data-filter="Analysis">Analysis / Opinion</button>
    <button class="filter-btn" data-filter="Essays">Essays</button>
    <button class="filter-btn" data-filter="Prose/Verse">Verse & Prose</button>
  </div>

  <div class="container" id="blog-container">
   <!-- Blog posts will be loaded here dynamically -->
  </div>

  <!-- Background Image Cycler -->
  <div class="background-cycler">
    <div class="cycler-info">
      <span id="current-image-name">posters-stickers.jpg</span>
      <span id="image-counter">1 of 8</span>
    </div>
    <div class="cycler-controls">
      <button id="prev-image" class="cycler-btn">← Previous</button>
      <button id="next-image" class="cycler-btn">Next →</button>
    </div>
  </div>

  <script>
  	// Page fade transition
  	document.addEventListener('DOMContentLoaded', function() {
  		// Use fallback background since no video is present
		const fallbackBg = document.querySelector('.fallback-background');
		if (fallbackBg) {
			fallbackBg.style.display = 'block';
		}
  		
 		// Fade in the page when it loads
 		document.body.classList.add('fade-in');
  		
 		// Handle navigation links for fade out effect
 		const navLinks = document.querySelectorAll('a[href]');
 		navLinks.forEach(link => {
 			// Only apply to internal links (not external or same page)
 			const href = link.getAttribute('href');
 			if (href && !href.startsWith('http') && !href.startsWith('#') && !href.startsWith('mailto:') && !href.startsWith('tel:')) {
 				link.addEventListener('click', function(e) {
 					// Don't apply to links that open in new tabs
 					if (!link.hasAttribute('target') || link.getAttribute('target') !== 'blank') {
 						e.preventDefault();
 						const targetUrl = this.getAttribute('href');
 						
 						// Fade out current page
 						document.body.classList.remove('fade-in');
 						document.body.classList.add('fade-out');
 						
 						// Navigate to new page after fade out
 						setTimeout(() => {
 							window.location.href = targetUrl;
 						}, 500);
 					}
 				});
 			}
 		});

 		// Load blog posts from XML
 		loadBlogPosts();
  		
 		// Initialize background image cycler
 		initBackgroundCycler();
  		
 		// Highlight current page in navigation
 		const currentPage = 'blog';
 		const currentNavLinks = document.querySelectorAll('.homepage-nav-link');
 		currentNavLinks.forEach(link => {
 			if (link.getAttribute('href') === currentPage) {
 				link.classList.add('current-page');
 			}
 		});
  	});

  	// Background Image Cycler Functionality
  	const backgroundImages = [
  		'posters-stickers.jpg',
  		'titian-bacchus-ariadne.jpg',
  		'light-shards.jpg',
  		'modern-art-gallery.jpg',
  		'neon.jpg',
  		'pastoral.jpg',
  		'essays.jpg',
  		'art-gallery-exhibit.jpg'
  	];
  	
  	let currentImageIndex = 0;
  	
  	function initBackgroundCycler() {
  		const prevBtn = document.getElementById('prev-image');
  		const nextBtn = document.getElementById('next-image');
  		const imageName = document.getElementById('current-image-name');
  		const imageCounter = document.getElementById('image-counter');
  		
  		function updateBackgroundImage() {
  			const backgroundElement = document.querySelector('.blog-background-image');
  			if (backgroundElement) {
  				backgroundElement.style.backgroundImage = `url('../site-resources/cover-photos/${backgroundImages[currentImageIndex]}')`;
  			}
  			
  			// Update display
  			imageName.textContent = backgroundImages[currentImageIndex];
  			imageCounter.textContent = `${currentImageIndex + 1} of ${backgroundImages.length}`;
  		}
  		
  		function nextImage() {
  			currentImageIndex = (currentImageIndex + 1) % backgroundImages.length;
  			updateBackgroundImage();
  		}
  		
  		function prevImage() {
  			currentImageIndex = (currentImageIndex - 1 + backgroundImages.length) % backgroundImages.length;
  			updateBackgroundImage();
  		}
  		
  		// Add event listeners
  		nextBtn.addEventListener('click', nextImage);
  		prevBtn.addEventListener('click', prevImage);
  		
  		// Initialize with first image
  		updateBackgroundImage();
  	}

  	// Function to convert date string to Date object
  	function parseDate(dateStr) {
  		const months = {
  			'January': 0, 'February': 1, 'March': 2, 'April': 3, 'May': 4, 'June': 5,
  			'July': 6, 'August': 7, 'September': 8, 'October': 9, 'November': 10, 'December': 11
  		};
  		
  		const parts = dateStr.split(' ');
  		if (parts.length === 2) {
  			const month = months[parts[0]];
  			const year = parseInt(parts[1]);
  			return new Date(year, month, 1); // Use first day of month for sorting
  		}
  		return new Date(0); // Fallback for invalid dates
  	}

  	// Global variables for filtering
  	let allPosts = [];
  	let currentFilter = 'all';
  	
  	// Function to load and display blog posts
  	async function loadBlogPosts() {
  		try {
  			const response = await fetch('blog-posts.xml');
  			const xmlText = await response.text();
  			const parser = new DOMParser();
  			const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
  			
  			const posts = xmlDoc.querySelectorAll('post');
  			const featuredPosts = [];
  			const regularPosts = [];
  			
  			// Parse all posts
  			posts.forEach(post => {
  				const postData = {
  					featured: post.getAttribute('featured') === 'true',
  					type: post.getAttribute('type'),
  					title: post.querySelector('title')?.textContent || '',
  					subtitle: post.querySelector('subtitle')?.textContent || '',
  					description: post.querySelector('description')?.textContent || '',
  					author: post.querySelector('author')?.textContent || '',
  					date: post.querySelector('date')?.textContent || '',
  					publication: post.querySelector('publication')?.textContent || '',
  					image: post.querySelector('image')?.textContent || '',
  					link: post.querySelector('link')?.textContent || '',
  					linkText: post.querySelector('link-text')?.textContent || 'View Article'
  				};
  				
  				if (postData.featured) {
  					featuredPosts.push(postData);
  				} else {
  					regularPosts.push(postData);
  				}
  			});
  			
  			// Sort regular posts by date (newest first)
  			regularPosts.sort((a, b) => {
  				const dateA = parseDate(a.date);
  				const dateB = parseDate(b.date);
  				return dateB - dateA;
  			});
  			
  			// Store all posts globally for filtering
  			allPosts = [...featuredPosts, ...regularPosts];
  			
  			// Display all posts initially
  			displayPosts(allPosts);
  			
  			// Initialize filter buttons
  			initFilterButtons();
  			
  		} catch (error) {
  			console.error('Error loading blog posts:', error);
  			document.getElementById('blog-container').innerHTML = '<p>Error loading blog posts. Please try again later.</p>';
  		}
  	}
  	
  	// Function to display posts
  	function displayPosts(postsToShow) {
  		const container = document.getElementById('blog-container');
  		let html = '';
  		
  		// Separate featured and regular posts
  		const featuredPosts = postsToShow.filter(post => post.featured);
  		const regularPosts = postsToShow.filter(post => !post.featured);
  		
  		// Add featured posts first
  		featuredPosts.forEach(post => {
  			html += generateFeaturedPostHTML(post);
  		});
  		
  		// Add regular posts
  		let altClass = false;
  		regularPosts.forEach(post => {
  			html += generateRegularPostHTML(post, altClass);
  			altClass = !altClass; // Alternate layout
  		});
  		
  		container.innerHTML = '';
  		const temp = document.createElement('div');
  		temp.innerHTML = html;
  		while (temp.firstChild) {
  			container.appendChild(temp.firstChild);
  		}
  	}
  	
  	// Function to initialize filter buttons
  	function initFilterButtons() {
  		const filterButtons = document.querySelectorAll('.filter-btn');
  		filterButtons.forEach(button => {
  			button.addEventListener('click', function() {
  				const filter = this.getAttribute('data-filter');
  				
  				// Update active button
  				filterButtons.forEach(btn => btn.classList.remove('active'));
  				this.classList.add('active');
  				
  				// Filter posts
  				filterPosts(filter);
  			});
  		});
  	}
  	
  	// Function to filter posts
  	function filterPosts(filter) {
  		currentFilter = filter;
  		
  		let filteredPosts;
  		if (filter === 'all') {
  			filteredPosts = allPosts;
  		} else {
  			filteredPosts = allPosts.filter(post => post.type === filter);
  		}
  		
  		displayPosts(filteredPosts);
  	}

  	// Function to generate featured post HTML
  	function generateFeaturedPostHTML(post) {
  		return `
  			<div class="blog-card-featured">
  				<div class="featured-banner">featured</div>
  				<div class="photo" style="background-image: url(${post.image});"></div>
  				<div class="description">
  					<h1>${post.title}</h1>
  					<h2>${post.subtitle}</h2>
  					<p>${post.description}</p>
  					<div class="read-more">
  						<a href="${post.link}" target="_blank">${post.linkText}</a>
  					</div>
  				</div>
  			</div>
  		`;
  	}

  	// Function to generate regular post HTML
  	function generateRegularPostHTML(post, altClass) {
  		const altClassStr = altClass ? ' alt' : '';
  		return `
  			<div class="blog-card${altClassStr}">
  				<div class="meta">
  					<div class="photo" style="background-image: url('${post.image}');"></div>
  					<ul class="details">
  						<li class="author">${post.author}</li>
  						<li class="date">${post.date}</li>
  						<li class="publication">${post.publication}</li>
  					</ul>
  				</div>
  				<div class="description">
  					<h1>${post.title}</h1>
  					<h2>${post.subtitle}</h2>
  					<p>${post.description}</p>
  					<p class="read-more">
  						<a href="${post.link}" target="_blank">${post.linkText}</a>
  					</p>
  				</div>
  			</div>
  		`;
  	}
  </script>
</body>
</html>
